

<!-- <?php
session_start();
if (isset($_SESSION['id_usuario'])) {
    //header('location: view/main.php');
    // You may want to remove this echo statement unless it's for debugging purposes
    // echo "sesion" . $_SESSION['id_usuario'];
    if($_SESSION['id_rol']==1){

    }
    else{
        header('location: productos.php');

    }
} else {

    //echo "Sesión no iniciada";
    header('location: Login.html');
}
?> -->
<!DOCTYPE html>
<html lang="en">

<head>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">

    <title>Formulario de Producto</title>
    <link rel="stylesheet" href="./assets/css/banner.css">
    <link rel="stylesheet" href="./assets/css/navboos.css">
    <link rel="stylesheet" href="./assets/css/styles.css">
    <link rel="stylesheet" href="../assets/css/carritoContdor.css">
    <style>
        .a {  font-family: 'Arial', sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;}

        form {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 300px;
        }

        h2 {
            text-align: center;
            color: #333;
        }

        label {
            display: block;
            margin: 10px 0 5px;
            color: #555;
        }

        input {
            width: 100%;
            padding: 8px;
            margin-bottom: 15px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        input[type="submit"] {
            background-color: #4caf50;
            color: white;
            cursor: pointer;
        }

        input[type="submit"]:hover {
            background-color: #45a049;
        }
    </style>
</head>

<body>
    <div id="mostrarBarra"></div>
    <div class="a">
        <form action="#" class="registro-form" method="post" id="forming" enctype="multipart/form-data">
            <h2>Subir Producto</h2>

            <label for="producto">Nombre del Producto:</label>
            <input type="text" id="producto" name="producto" required>

            <label for="precio">Precio:</label>
            <input type="number" id="precio" name="precio" min="0" step="0.01" required>

            <label for="stock">Stock:</label>
            <input type="number" id="stock" name="stock" min="0" required>

            <label for="foto">Foto del Producto:</label>
            <input type="file" id="foto" name="foto" accept="image/*" required>
            <input type="submit" class="fadeIn fourth" value="Registrarse" required>
        </form>
    </div>

</body>

</html>
<script>
    $(document).ready(function() {
        barra();
        carritoContador();
    });

    function barra() {
        $.ajax({
            url: '../controller/user_controller.php?opc=barra_navegacion',
            type: 'GET',
            success: function(response) {
                $('#mostrarBarra').html(response);
            },
            error: function() {
                // Maneja errores si la solicitud AJAX falla
                //  redirigirAVentana("login.html");
            }
        });
    }

    function carritoContador() {
        $.ajax({
            url: '../controller/user/ctrlUser.php?opc=8',
            type: 'GET',
            success: function(response) {
                $('#contador-value').html(response);
            },
            error: function() {
                // Maneja errores si la solicitud AJAX falla
                $('#contador').html('Error al cargar la barra de navegación');
            }
        });
    }
</script>
<script>
    jQuery(document).on('submit', '#forming', function (event) {
    event.preventDefault();

    // Continúa con el envío del formulario si el captcha se completó
    jQuery.ajax({
        url: '../controller/ctrlSubir.php?opc=1',
        type: 'POST',
        dataType: 'json',
        data: jQuery(this).serialize(),
        beforeSend: function () {
            // jQuery('.botonlg').val('Validando...');
        }
    })
        .done(function (respuesta) {
            if (respuesta.success) {
                console.log(respuesta);
                alert("exito");
        
            } else {
                alert('fallo la subido');
                console.log(respuesta);

            }
        })

        .fail(function (resp) {
            console.log(resp.responseText);
        })
        .always(function () {
            console.log('Complete');

        });
});

</script>
